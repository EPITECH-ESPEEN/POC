services:
  decrypt:
    build:
      context: ./env/
      dockerfile: ./docker/Dockerfile-decrypt
    environment:
      - ENV_PASSWORD=${ENV_PASSWORD}
    volumes:
      - ./:/source/
      - env:/output/

  db:
    image: 

  back:
    build:
      context: ./
      dockerfile: ./docker/Dockerfile-prod
    restart: "always"
    depends_on:
      - decrypt
    volumes:
      - env:/env/
    networks:
      area:
        ipv4_address: 172.21.0.2

volumes:
  env:

networks:
  area:
    driver: bridge
    ipam:
      config:
        - subnet: 172.21.0.0/24
        - gateway: 172.21.0.1